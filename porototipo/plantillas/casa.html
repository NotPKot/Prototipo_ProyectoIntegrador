{% extends "layout.html" %}

{% block content %}

<!– sin uso, antigua página principal –>

    <!DOCTYPE html>
    <html lang="es">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mapa</title>
   
        <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
        <link rel="stylesheet" href="../../programacionamiento/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
        <style>
            body {
                margin: 0;
                padding: 0;
            }

            #map {
                width: 600px;
                height: 425px;
            }
        </style>
    </head>

    <body>
        <div id="map"></div>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
        <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
        <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
        <script src="../../programacionamiento/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
        <script>
            
            var map_init = L.map('map', {
                center: [-40.57395, -73.13348],
                zoom: 13
            });
            
            var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map_init);
            /*
            L.Control.geocoder().addTo(map_init);
            if (!navigator.geolocation) {
                console.log("error")
            } else {
                setInterval(() => {
                    navigator.geolocation.getCurrentPosition(getPosition)
                }, 5000);
            };
            var marker, circle, lat, long, accuracy;
            
            function getPosition(position) {
                // console.log(position)
                lat = position.coords.latitude
                long = position.coords.longitude
                accuracy = position.coords.accuracy

                if (marker) {
                    map_init.removeLayer(marker)
                }

                if (circle) {
                    map_init.removeLayer(circle)
                }

                marker = L.marker([lat, long])
                circle = L.circle([lat, long], { radius: accuracy })

                var featureGroup = L.featureGroup([marker, circle]).addTo(map_init)

                map_init.fitBounds(featureGroup.getBounds())

                console.log("Tus coordenadas son: Lat: " + lat + " Long: " + long + " Presición: " + accuracy)
            }
            */
            var map = L.map('map');

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            L.Routing.control({
                waypoints: [
                L.latLng(-40.571687, -73.169562),
                L.latLng(-40.574188, -73.168937)
                ],
                routeWhileDragging: true
            }).addTo(map);
            
        </script>
    </body>

    </html>

    {% endblock %}